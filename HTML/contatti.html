<!DOCTYPE html>
<html lang="it">
<head>
  <!-- Start cookiebot banner -->
  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e577acbd-ac8c-43b6-834e-e77c151ae41c" data-blockingmode="auto" type="text/javascript"></script>
  <!-- End cookiebot banner -->
  <meta charset="UTF-8">
  <title>SeveriCraft - Contatti</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../Images/logo.png" type="image/x-icon">
  <link rel="stylesheet" href="../CSS/Base.css">
  <link rel="stylesheet" href="../CSS/Sections/Footer.css">
  <link rel="stylesheet" href="../CSS/Sections/Navbar.css">
  <link rel="stylesheet" href="../CSS/Classes/Framework.css">
</head>
<body>
    <!--=== Navigation Bar ===-->
    <nav class="nav">
        <div class="nav-logo flex">
            <img src="../Images/logo.png" alt="Logo server SeveriCraft" width="70px" height="70px">
            <h1>SeveriCraft</h1> 
        </div>

        <div class="nav-list flex nav-list-centered">
            <a class="nav-item-1" href="../HTML/Index.html"><span>Home</span></a> 
            <a class="nav-item-3" href="../HTML/Rules.html"><span>Regole</span></a>
            <a class="nav-item-5" href="https://vote.severicraft.it"><span>Vota</span></a>
            <a class="nav-item-4" href="https://discord.severicraft.com"><span>Discord</span></a> 
        </div>

        <div class="flex">
            <a href="../HTML/Login.html" class="nav-btn btn-login flex">
                <img src="../Images/login.webp" alt="Icona Login" width="20px" height="20px">
                <span>Accedi</span>
            </a>
        </div>
    </nav>

    <!--=== Navbar for mobile ===-->
    <section class="nav-mobile">
        <div class="nav-mobile-title flex">
            <div class="navbars-bars">
                <div class="bar bar-1"></div>
                <div class="bar bar-2"></div>
                <div class="bar bar-3"></div>
            </div>
            <div class="navbars-title flex">
                <img src="../Images/logo.png" alt="Logo server SeveriCraft" width="30px" height="30px">
                <h1>SeveriCraft</h1>
            </div>
        </div>
        <div class="nav-mobile-menu flex" style="flex-direction: column; align-items: center; justify-content: center;">
            <a href="../HTML/Rules.html"><span>Regole</span></a>
            <a href="https://vote.severicraft.it"><span>Vota</span></a>
            <a id="mobile-login-btn" href="../HTML/Login.html" class="btn-mobile-auth" style="text-align:center;"><span>Accedi</span></a>
            <button id="mobile-profile-btn" class="btn-profile" style="display: none; text-align:center;"><span>Profilo</span></button>
            <!-- Bottone Profilo (aggiunto via JS con classe btn-profile se loggato) -->
        </div>
    </section>

  <!-- form contatti -->
  <main class="main" style="padding: 40px 20px; max-width: 700px; margin: auto;">
    <h1 style="text-align:center;">Contattaci</h1>
    <form id="contact-form" style="display:flex; flex-direction:column; gap:24px;">
      <div style="display: flex; gap: 16px;">
        <input type="text" name="nome" placeholder="Nome" required
          style="flex:1; min-width:0; padding:14px 16px; font-size:1.1em; border:1.5px solid #44521e; border-radius:7px;">
        <input type="text" name="cognome" placeholder="Cognome" required
          style="flex:1; min-width:0; padding:14px 16px; font-size:1.1em; border:1.5px solid #44521e; border-radius:7px;">
      </div>
      <div style="display: flex; gap: 16px;">
        <input type="email" name="email" placeholder="Email" required
          style="flex:1; min-width:0; padding:14px 16px; font-size:1.1em; border:1.5px solid #44521e; border-radius:7px;">
        <input type="text" name="minecraft_nick" placeholder="Nickname Minecraft (opzionale)"
          style="flex:1; min-width:0; padding:14px 16px; font-size:1.1em; border:1.5px solid #44521e; border-radius:7px;">
      </div>
      <div style="display: flex; gap: 16px;">
        <textarea name="messaggio" placeholder="Scrivi il tuo messaggio..." rows="7" required
          style="flex:1; min-width:0; padding:16px; font-size:1.15em; border:1.5px solid #44521e; border-radius:7px; resize:none;"></textarea>
      </div>
      <button type="submit" style="padding: 14px 0; background:#44521e; color:white; border:none; border-radius:7px; cursor:pointer; font-size:1.15em;">Invia</button>
      <p id="response" style="text-align:center;"></p>
    </form>
  </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-items">
                <span class="sp-1">©2025 SeveriCraft | Tutti i diritti riservati.</span>
                <span class="sp-2">Minecraft è un marchio di Mojang e SeveriCraft non è affiliato o approvato da Mojang.</span>
                <div class="footer-links">
                    <a href="/HTML/TOS.html">Termini</a> |
                    <a href="/HTML/Privacy.html">Privacy</a> |
                    <a href="/HTML/Cookie.html">Cookie</a> |
                    <a href="/HTML/Contatti.html">Contatti</a>
                </div>
            </div>
            <div class="footer-socials">
                <a href="https://discord.severicraft.it" title="Discord">
                    <img class="discord-social" src="../Images/discord.webp" alt="Discord">
                </a>
                <a href="https://youtube.com" title="YouTube">
                    <img class="yt-social" src="../Images/youtube.webp" alt="YouTube">
                </a>
            </div>
        </div>
    </footer>

    <script src="../JS/Rules.js"></script>
    <script src="../JS/General.js"></script>
    <script src="../JS/AuthProfile.js"></script>
    <script>
      document.getElementById("contact-form").addEventListener("submit", async function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        const response = await fetch("https://api.severicraft.it/contact", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(Object.fromEntries(formData))
        });
        const result = await response.json();
        if (result.success) {
          showSuccessPopup("Messaggio inviato con successo!");
        } else {
          document.getElementById("response").innerText = result.message || "Errore nell'invio del messaggio.";
        }
      });

      function showSuccessPopup(message) {
        // Remove existing popup if present
        const oldPopup = document.getElementById('success-popup');
        if (oldPopup) oldPopup.remove();

        const popup = document.createElement('div');
        popup.id = 'success-popup';
        popup.style.position = 'fixed';
        popup.style.top = '40px';
        popup.style.left = '50%';
        popup.style.transform = 'translateX(-50%)';
        popup.style.background = '#fff';
        popup.style.border = '2px solid #44521e';
        popup.style.borderRadius = '10px';
        popup.style.boxShadow = '0 8px 32px rgba(0,0,0,0.18)';
        popup.style.padding = '28px 38px 22px 28px';
        popup.style.zIndex = '9999';
        popup.style.color = '#222';
        popup.style.fontSize = '1.15em';
        popup.style.minWidth = '260px';
        popup.style.textAlign = 'center';

        // Close button
        const closeBtn = document.createElement('span');
        closeBtn.innerHTML = '&times;';
        closeBtn.style.position = 'absolute';
        closeBtn.style.top = '8px';
        closeBtn.style.right = '16px';
        closeBtn.style.fontSize = '1.5em';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.color = '#44521e';
        closeBtn.setAttribute('aria-label', 'Chiudi');
        closeBtn.onclick = function() {
          popup.remove();
        };

        popup.appendChild(closeBtn);

        const msg = document.createElement('h4');
        msg.textContent = message;
        msg.style.marginTop = '10px';
        msg.style.color = '#222';
        popup.appendChild(msg);

        document.body.appendChild(popup);
      }
    </script>
</body>
</html>